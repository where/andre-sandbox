  <!-- Properties -->

  <property name="build.test.classes.dir" value="${build.dir}/test-classes" />
  <property name="test.output.dir"        value="${build.dir}/test-output"/>
  <property name="testng.file"            value="testng.xml" />

  <property name="src.test.dir"           value="${basedir}/test" />
  <property name="src.test.config.dir"    value="${src.config.dir}/test" />
  <property name="test.title"             value="PPHere JAX-RS Tests" />

  <!-- Classpaths -->

  <path id="test.classpath">
    <path refid="compile.classpath"/>
    <pathelement location="${build.classes.dir}"/>
    <pathelement location="${build.test.classes.dir}"/>
    <pathelement location="${testng.jar}"/>
  </path>

  <path id="test.runtime.classpath">
    <path refid="compile.classpath"/>
    <pathelement location="${src.config.dir}" />
    <pathelement location="${src.test.config.dir}" />
    <pathelement location="${build.classes.dir}"/>
    <pathelement location="${build.test.classes.dir}"/>
    <pathelement location="config" />
    <fileset dir="${lib.dir}"   includes="reportng/**/*.jar" />
  </path>

  <!-- Test targets -->

   <target  name="test" description="Run tests" depends="compile">
      <mkdir dir="${test.output.dir}"/>
      <taskdef name="testng" 
         classpathref="test.classpath" 
         classname="com.beust.testng.TestNGAntTask"/>
      <testng
         classpathref="test.runtime.classpath"
         listeners="org.uncommons.reportng.HTMLReporter"
         outputdir="${test.output.dir}">
         <sysproperty key="org.uncommons.reportng.show-expected-exception" value="true" />
         <sysproperty key="org.uncommons.reportng.title" value="${test.title}"/>
         <xmlfileset dir="${basedir}" includes="${testng.file}"/>
      </testng>
      <echo>See ${test.output.dir}/index.html for report</echo>
   </target>

   <target  name="echo.test" description="Echo test properties of interest" >
     <echo message="Properties" />
     <echo message="  basedir=${basedir}" />
     <echo message="  build.test.classes.dir=${build.test.classes.dir}" />
     <echo message="  test.output.dir      =${test.output.dir}" />
     <echo message="  test.title           =${test.title}" />
   </target>
