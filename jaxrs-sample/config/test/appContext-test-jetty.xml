<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
       xmlns:util="http://www.springframework.org/schema/util"
       xmlns:context="http://www.springframework.org/schema/context"
    xsi:schemaLocation="http://www.springframework.org/schema/beans
      http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
      http://www.springframework.org/schema/context
      http://www.springframework.org/schema/context/spring-context-3.0.xsd
      http://www.springframework.org/schema/util
      http://www.springframework.org/schema/util/spring-util-3.0.xsd
      ">

  <import resource="classpath:appContext-core.xml" />

  <bean id="jettyRequestHandler" class="com.andre.video.rest.http.server.jetty.JettyRequestHandler" lazy-init="true" >
    <constructor-arg ref="ehBaseHandler" />
  </bean>

  <bean id="httpServer" class="org.eclipse.jetty.server.Server" 
        init-method="start" destroy-method="stop" lazy-init="true" >
 
    <property name="connectors">
      <list>
        <bean id="Connector" class="org.eclipse.jetty.server.nio.SelectChannelConnector">
          <property name="port" value="${embedded.server.http.port}"/>
        </bean>
      </list>
    </property>

    <property name="threadPool">  
      <bean id="threadPool" class="org.eclipse.jetty.util.thread.QueuedThreadPool">
        <property name="minThreads" value="${embedded.server.minThreads}"/>
        <property name="maxThreads" value="${embedded.server.maxThreads}"/>
      </bean>
    </property>
 
    <property name="handler">
      <bean id="handlers" class="org.eclipse.jetty.server.handler.HandlerList">
        <property name="handlers">
          <list>
            <ref bean="jettyRequestHandler" />
<!--
            <bean class="org.eclipse.jetty.server.handler.ResourceHandler">
              <property name="directoriesListed" value="true"/>
              <property name="welcomeFiles">
                <list>
                  <value>index.html</value>
                </list>
              </property>
              <property name="resourceBase" value="."/>
            </bean>       
            <bean class="org.eclipse.jetty.server.handler.DefaultHandler"/>
-->
          </list>
        </property>
      </bean>
    </property>
  </bean>

</beans>
